#
# THIS IS A SAMPLE CONFIGURATION FOR KANNEL
#
# For any modifications to this file, see Kannel User Guide 
# If that does not help, send email to users@kannel.org
#

group = core
admin-port = 13000
admin-password = bar
status-password = foo
#admin-deny-ip = ""
admin-allow-ip = "192.168.*.*"
log-file = "/var/log/kannel/kannel.log"
log-level = 0
access-log = "/var/log/kannel/access.log"
#access-log-format = "%k|%s|%S|%r|%a|%b|%e|%t|%T|%p|%P|%q|%Q|%i|%I|%d|%R|%N|%D|%A|%F|%n|%c|%m|%M|%C|%u|%B|%o|%O|%f|%x|%v|%V|%#"
access-log-format = "--k %k|--s %s|--S %S|--r %r|--a %a|--b %b|--e %e|--t %t|--T %T|--p %p|--P %P|--q %q|--Q %Q|--i %i|--I %I |--d %d|--R %R|--N %N|--D %D|--A %A|--F %F|--n %n|--c %c|--m %m|--M %M|--C %C|--u %u|--B %B|--o %o|--O %O|--f %f|--x %x|--v %v|--V %V|--diese %#"
#http-proxy-host = "127.0.0.1"
#http-proxy-port = 8080
#http-proxy-exceptions = "127.0.0.1"
#http-proxy-username = "user"
#http-proxy-password = "password"
#ssl-certkey-file = "mycertandprivkeyfile.pem"
dlr-storage=mysql
# Smsbox related
smsbox-port = 13001
#box-deny-ip = "*.*.*.*"
box-allow-ip = "127.0.0.1;10.39.230.*;10.39.234.*;*.*.*.*"
unified-prefix = "+253,253;00253,253"
#white-list = "http://127.0.0.1/white-list.txt"
#black-list = "http://127.0.0.1/black-list.txt"
#store-file = "kannel.store"
# Wapbox related
#wapbox-port = 13002
#udp-deny-ip = "*.*.*.*"
#udp-allow-ip = "127.0.0.1"
#wdp-interface-name = "*"

#include = "sqlbox.conf"

# SMSC CONNECTIONS - GLOBAL FIELDS
#group = smsc
#smsc = 
#smsc-id = ID
#denied-smsc-id = "X;Y"
#allowed-smsc-id = "Z"
#preferred-smsc-id = "W"
#allowed-prefix = "040;050"
#denied-prefix = "060;070"
#alt-charset = 


# SMSC Nokia CIMD2
#group = smsc
#smsc = cimd2
#host = 
#port = 
#smsc-username =
#smsc-password =
#keepalive = 
#sender-prefix =


# SMSC EMI
#group = smsc
#smsc = emi2 
#smsc = emi_ip to use the old implementation
#host =
#port =
#smsc-username =
#smsc-password =
#device = /dev/
#phone = 
#our-port =
#receive-port =
#connect-allow-ip =
#keepalive = 
#flow-control =


# SMSC SMPP
group = smsc
smsc-id = smscsmpp
smsc = smpp
host = 10.11.24.150
port = 3600
#receive-port = 3600
transceiver-mode = 1
smsc-username = kannel
smsc-password = dT`jtsu,
system-type = SMPP
#address-range =
source-addr-ton = 0
source-addr-npi = 1
dest-addr-ton = 1
dest-addr-npi = 1
#interface-version = 34
alt-charset = "ASCII;"
alt-addr-charset = "GSM"
#access-log = "/var/log/kannel/access-smpp1.log"


# SMSC SMPP(node2)
group = smsc
smsc-id = smscsmpp
smsc = smpp
host = 10.11.24.151
port = 3600
#receive-port = 3600
transceiver-mode = 1
smsc-username = kannel
smsc-password = dT`jtsu,
system-type = SMPP
#address-range =
source-addr-ton = 0
source-addr-npi = 1
dest-addr-ton = 1
dest-addr-npi = 1
#interface-version = 34
alt-charset = "ASCII;"
alt-addr-charset = "GSM"
#access-log = "/var/log/kannel/access-smpp2.log"


# SMSC SEMA
#group = smsc
#smsc = sema
#device = /dev/tty0
#smsc_nua = (X121 smsc address)
#home_nua = (x121 radio pad address)
#wait_report = 0/1 (0 means false, 1 means true)


# SMSC OIS
#group = smsc
#smsc = ois
#host = 103.102.101.100
#port = 10000
#receive-port = 10000
#ois-debug-level = 0


# SMSC GSM
#group = smsc
#smsc = at
#modemtype = wavecom | premicell | siemens | siemens-tc35 | falcom | nokiaphone | ericsson
#device = /dev/ttyS0
#pin = 2345
#validityperiod = 167


# SMSC Fake
#group = smsc
#smsc = fake
#host =
#port =
#connect-allow-ip = 


# SMSC HTTP
# group = smsc
# smsc = http
#smsc-id = smschttp
# system-type = kannel
# send-url = http://10.11.22.8:8400/bss-api-djt/sendsms/
# port = 8400
# connect-allow-ip = "*.*.*.*"
# username = djt_sms
# password = Djt@Sms
# allowed-smsc-id = smschttp

# SMSC HTTP Generic
# group = smsc
# smsc = http
# smsc-id = httpgeneric
# system-type = generic
# port = 8400
# send-url = "http://10.11.22.8:8400/bss-api-djt/sendsms/?user=djt_sms&pass=Djt@Sms&from=%P&to=%p&text=%b"
# #smsc-user = djt_sms
# #smsc-pass = Djt@Sms
# generic-param-username = user
# generic-param-password = pass
# status-success-regex = "Ok"
# status-permfail-regex = "failure"
# status-tempfail-regex = "retry later"
# generic-foreign-id-regex = "<id>(.+)</id>"
# generic-message-sent = "Message sent with ID: %I"
# generic-status-sent = 200
# generic-status-error = 404
# allowed-smsc-id = httpgeneric


# SMSBOX SETUP
group = smsbox
smsbox-id = 1
bearerbox-host = 10.39.230.68
sendsms-port = 13013
sendsms-chars = "0123456789 +-"
#global-sender = 12345
log-file = "/var/log/kannel/smsbox.log"
log-level = 0
access-log = "/var/log/kannel/smsbox-access.log"
#access-log-format = "%k %s %S %r %a %b %e %t %T %p %P %q %Q %i %I %d %R %N %D %A %F %n %c %m %M %C %u %B %o %O %f %x %v %V %#"
#access-log-format = "%t %l [SMSC:%i] [SVC:%n] [ACT:%A] [BINF:%B] [FID:%F] [META:%D] [from:%p] [to:%P] [flags:%m:%c:%M:%C:%d] [msg:%L:%b] [udh:%U:%u]"
#white-list =
#black-list =
#reply-couldnotfetch = 
#reply-couldnotrepresent = 
#reply-requestfailed =
#reply-emptymessage = 

# SMSBOX ROUTE
group = smsbox-route
smsbox-id = 1
# smsc-id = http
shortcode = "8529"


# SEND-SMS USERS

group = sendsms-user
username = sms_usr1
password = sms_pwd1
#user-deny-ip = ""
user-allow-ip = "127.0.0.1;10.39.230.68;*.*.*.*"
max-messages = 3
concatenation = true
#dlr-mask = 31
dlr-url = http://10.39.230.68:8099/handle.php/?k=%k&s=%s&S=%S&r=%r&a=%a&b=%b&e=%e&t=%t&T=%T&p=%p&P=%P&q=%q&Q=%Q&i=%i&I=%I=&d=%d&R=%R&N=%N&D=%D&A=%A&F=%F&n=%n&c=%c&m=%m&M=%M&C=%C&u=%u&B=%B&o=%o&O=%O&f=%f&x=%x&v=%v&V=%V&diese=%#

# this sender is for Kannel relay testing (http_smsc)

group = sendsms-user
username = kannel
password = rL4y
user-deny-ip = "*.*.*.*"
user-allow-ip = "127.0.0.1"
#name = service_kannel
#forced-smsc = ID
#default-smsc = ID
#faked-sended =
#max-messages = 1
#concatenation = 1
#split-chars = 
#split-suffix = 
#omit-empty = 
#header =
#footer =
#allowed-prefix =
#denied-prefix =
#white-list =
#black-list =



# SMS SERVICES

#group = sms-service
#name = nothing
#keyword = nop
#aliases = "noppy;niente"
#text = "You asked nothing and I did it!"
#get-url = "http://"
#post-url = "http://"
#file = "/tmp/"
#accepted-smsc = ID
#allowed-prefix = 
#denied-prefix = 
#catch-all = false
#send-sender = false
#strip-keyword = false
#faked-sender = 
#max-messages = 1
#accept-x-kannel-headers = false
#assume-plain-text = false
#concatenation = false
#split-chars = 
#split-suffix = "+"
#omit-empty = true
#header =
#footer =
#prefix = 
#suffix =
#white-list =
#black-list =


# SMS SERVICE GET-URL EXAMPLE
#group = sms-service
#keyword = relay
#get-url = "http://10.39.230.68/service?phone=%p&text=%r&binary=%b&smsc=$i&time=%t


# SMS SERVICE black-list
#group = sms-service
#keyword = black-list
#text = "You are not alowed to use this service, Go away!"

# SMS SERVICE TEST
group = sms-service
keyword = test
accepted-smsc = smscsmpp
text = "ack for message: %b"
max-messages = 3
exec = cd /etc/kannel/scripts/ && nohup python3 /etc/kannel/scripts/process_inc_sms.py --k "%k" --s "%s" --S "%S" --r "%r" --a "%a" --b "%b" --e "%e" --t "%t" --T "%T" --p "%p" --P "%P" --q "%q" --Q "%Q" --i "%i" --I "%I"  --d "%d" --R "%R" --N "%N" --D "%D" --A "%A" --F "%F" --n "%n" --c "%c" --m "%m" --M "%M" --C "%C" --u "%u" --B "%B" --o "%o" --O "%O" --f "%f" --x "%x" --v "%v" --V "%V" --diese "%#" >> /etc/kannel/log/incoming_sms.log 2>&1
#get-url =

# SMS SERVICE Default
# there should be default always
group = sms-service
keyword = default
accepted-smsc = smscsmpp
#text = "catch-all ack for message: %b"
catch-all = true
max-messages = 0
#faked-sender = KANNEL1
exec = python3 /etc/kannel/scripts/process_inc_sms.py --k "%k" --s "%s" --S "%S" --r "%r" --a "%a" --b "%b" --e "%e" --t "%t" --T "%T" --p "%p" --P "%P" --q "%q" --Q "%Q" --i "%i" --I "%I"  --d "%d" --R "%R" --N "%N" --D "%D" --A "%A" --F "%F" --n "%n" --c "%c" --m "%m" --M "%M" --C "%C" --u "%u" --B "%B" --o "%o" --O "%O" --f "%f" --x "%x" --v "%v" --V "%V" --diese "%#" >> /etc/kannel/log/incoming_sms.log 
#file = /etc/kannel/log/incoming_sms.csv

group = mysql-connection
id = mydlr
host = 10.39.230.68
username = kannel
password = Kannel@123#
database = sms_db
max-connections = 15

group = dlr-db
id = mydlr
table = dlr
field-smsc = smsc
field-timestamp = ts
field-destination = destination
field-source = source
field-service = service
field-url = url
field-mask = mask
field-status = status
field-boxc-id = boxc

